# ABAP 기본 데이터 타입 정리

### 1. 숫자/문자 기반 타입

- **NUMC**
    - 숫자로만 구성된 문자 타입
    - 예: `001`
- **DATS**
    - 날짜(YYYYMMDD, 8자리 숫자)
    - 내부저장: `20250916` (8자리)
    - 출력: `2025.09.16` (10자리, Output length)
- **TIMS**
    - 시분초(HHMMSS)

---

### 2. 수치형 타입

- **QUAN**
    - 양(수량), 무게·길이·거리
    - 타입: Packed Number(P)
    - **Internal length** = 정수 자릿수, **Decimal Places** = 소수 자릿수
    - 단위(`UNIT`)와 함께 사용
- **CURR**
    - 금액 (Packed Number, P)
    - 통화(`CUKY`)와 함께 사용

---

### 3. 단위/통화/언어

- **UNIT**
    - 무게·길이 단위 (예: `KG`, `C`)
- **CUKY**
    - 통화 단위 (예: `USD`, `KRW`)
- **LANG**
    - 언어 키 (예: `EN`, `KO`)

---

### 4. 정수 타입

- **INT1** : 1바이트 정수
- **INT2** : 2바이트 정수
- **INT4** : 4바이트 정수 (일반적으로 `TYPE I`가 = `INT4`)
- **INT8** : 8바이트 정수

---

### 5. 기타

- **STRING** : 가변 길이 문자열
- **ACCP** : 회계 연월 (YYYYMM)

---

# Internal length vs Output length

- **Internal length**
    - 실제 저장 길이
    - 예: DATS → `20250916` (8자리 → 내부적으로 16바이트)
- **Output length**
    - 화면 출력 길이
    - 예: `2025.09.16` → 10자리

---

# TYPE / STRUCTURE / TABLE 개념

1. **필드 (Field)**
    - 하나의 데이터(셀) 공간
    - 예:
        
        ```abap
        slis_text40(40) TYPE c.
        TYPES myfield(10) TYPE c.
        ```
        
2. **행 (Row, 구조체)**
    - 여러 필드를 묶은 한 줄 구조
    - 예:
        
        ```abap
        TYPES: BEGIN OF slis_add_fieldcat,
                 fieldname TYPE slis_fieldname,
                 web_field TYPE slis_fieldname,
                 href_hndl TYPE i,
               END OF slis_add_fieldcat.
        ```
        
3. **테이블 (Internal Table)**
    - 행(구조체)을 여러 개 모은 표 형태
    - 예:
        
        ```abap
        TYPES: slis_t_add_fieldcat TYPE STANDARD TABLE OF slis_add_fieldcat.
        DATA: it_scarr TYPE STANDARD TABLE OF t_scarr.
        ```
        
    - 예전 문법: `OCCURS 0` (지금은 `TABLE OF` 권장)

---

# 주석 처리

- 행 전체 주석:
- 인라인 주석: `"`
- 편집기 단축키:
    - `Ctrl + ,` → 주석 달기
    - `Ctrl + .` → 주석 해제

<img width="594" height="287" alt="Image" src="https://github.com/user-attachments/assets/c766dea5-6294-4199-b9d6-8d9570b996c9" />


```
*&---------------------------------------------------------------------*
*& Report Z2WEEK_ALV00
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
REPORT Z2WEEK_ALV01.


TABLES:     spfli.

TYPE-POOLS: slis.                                 "ALV Declarations

*Data Declaration
*----------------
TYPES: BEGIN OF t_spfli,
       carrid   TYPE spfli-carrid,
       connid   TYPE spfli-connid,
       fltime   TYPE spfli-fltime,
       deptime  TYPE spfli-deptime,
       arrtime  TYPE spfli-arrtime,
       distance TYPE spfli-distance,
       distid   TYPE spfli-distid,
       END OF t_spfli.

DATA: it_spfli TYPE STANDARD TABLE OF t_spfli INITIAL SIZE 0,
      wa_spfli TYPE t_spfli.

*ALV data declarations
DATA: fieldcatalog TYPE slis_t_fieldcat_alv WITH HEADER LINE,
      gd_tab_group TYPE slis_t_sp_group_alv,
      gd_layout    TYPE slis_layout_alv,
      gd_repid     LIKE sy-repid.


DATA : t TYPE slis_t_sp_group_alv .
************************************************************************
*Start-of-selection.
START-OF-SELECTION.

  PERFORM data_retrieval.
  PERFORM build_fieldcatalog.
  PERFORM build_layout.
  PERFORM display_alv_report.


*&---------------------------------------------------------------------*
*&      Form  BUILD_FIELDCATALOG
*&---------------------------------------------------------------------*
*       Build Fieldcatalog for ALV Report
*----------------------------------------------------------------------*
FORM build_fieldcatalog.

  fieldcatalog-fieldname   = 'carrid'.
  fieldcatalog-seltext_m   = 'Airline Code'.
  fieldcatalog-col_pos     = 0.
  fieldcatalog-outputlen   = 10.
  APPEND fieldcatalog TO fieldcatalog.
  CLEAR  fieldcatalog.

  fieldcatalog-fieldname   = 'connid'.
  fieldcatalog-seltext_m   = 'Fligth Connection Number'.
  fieldcatalog-col_pos     = 1.
  APPEND fieldcatalog TO fieldcatalog.
  CLEAR  fieldcatalog.

  fieldcatalog-fieldname   = 'fltime'.
  fieldcatalog-seltext_m   = 'Flight time'.
  fieldcatalog-col_pos     = 2.
  APPEND fieldcatalog TO fieldcatalog.
  CLEAR  fieldcatalog.

  fieldcatalog-fieldname   = 'deptime'.
  fieldcatalog-seltext_m   = 'Departure time'.
  fieldcatalog-col_pos     = 3.
  APPEND fieldcatalog TO fieldcatalog.
  CLEAR  fieldcatalog.

  fieldcatalog-fieldname   = 'arrtime'.
  fieldcatalog-seltext_m   = 'Arrival time'.
  fieldcatalog-col_pos     = 4.
  APPEND fieldcatalog TO fieldcatalog.
  CLEAR  fieldcatalog.

  fieldcatalog-fieldname   = 'distance'.
  fieldcatalog-seltext_m   = 'Distance'.
  fieldcatalog-col_pos     = 5.
  APPEND fieldcatalog TO fieldcatalog.
  CLEAR  fieldcatalog.

  fieldcatalog-fieldname   = 'distid'.
  fieldcatalog-seltext_m   = 'Mass unit of distance (kms, miles)'.
  fieldcatalog-col_pos     = 6.
  APPEND fieldcatalog TO fieldcatalog.
  CLEAR  fieldcatalog.
ENDFORM.                    " BUILD_FIELDCATALOG


*&---------------------------------------------------------------------*
*&      Form  BUILD_LAYOUT
*&---------------------------------------------------------------------*
*       Build layout for ALV grid report
*----------------------------------------------------------------------*
FORM build_layout.

  gd_layout-no_input          = 'X'.
  gd_layout-colwidth_optimize = 'X'.
  gd_layout-zebra = 'X'.
*  gd_layout-info_fieldname =      'LINE_COLOR'.
*  gd_layout-def_status = 'A'.

ENDFORM.                    " BUILD_LAYOUT


*&---------------------------------------------------------------------*
*&      Form  DISPLAY_ALV_REPORT
*&---------------------------------------------------------------------*
*       Display report using ALV grid
*----------------------------------------------------------------------*
FORM display_alv_report.
  gd_repid = sy-repid.
  CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
    EXPORTING
      i_callback_program = gd_repid
      is_layout          = gd_layout
      it_fieldcat        = fieldcatalog[]
      i_save             = 'X'
    TABLES
      t_outtab           = it_spfli
    EXCEPTIONS
      program_error      = 1
      OTHERS             = 2.
  IF sy-subrc <> 0.
* MESSAGE ID SY-MSGID TYPE SY-MSGTY NUMBER SY-MSGNO
*         WITH SY-MSGV1 SY-MSGV2 SY-MSGV3 SY-MSGV4.
  ENDIF.


ENDFORM.                    " DISPLAY_ALV_REPORT


*&---------------------------------------------------------------------*
*&      Form  DATA_RETRIEVAL
*&---------------------------------------------------------------------*
*       Retrieve data form EKPO table and populate itab it_ekko
*----------------------------------------------------------------------*
FORM data_retrieval.
  DATA: ld_color(1) TYPE c.

  SELECT carrid connid fltime deptime arrtime distance distid
*   UP TO 10 ROWS
    FROM spfli "항공사 테이블
    INTO TABLE it_spfli.

ENDFORM.                    " DATA_RETRIEVAL
```