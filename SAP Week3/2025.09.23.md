ABAP 구조 요약
# 1. 기본 구조 단위

필드(Field):
타입과 자리수로 구성된 공간 하나.
예: type: num(1) type n. → 숫자 타입 N, 길이 1자리.

행(Row):
여러 필드가 모인 구조체.

types: slis_qinfo_alv type alv_s_qinf.

begin of ... end of 로 직접 정의 가능.

테이블(Table):
행(Row)들이 여러 개 모인 표 구조.

OCCURS 문법(옛날 방식) → 동적 확장 테이블.

TABLE OF 문법(요즘 권장) → 표준 테이블 구조.

# 2. 선언 방식

TYPES: 구조(틀)만 정의 → 실제 데이터 공간 없음.

DATA: TYPES 구조를 기반으로 실제 데이터 공간(변수/테이블) 생성.

LIKE: 이미 선언된 변수/DB 필드의 타입을 참조.

TYPE: 직접 타입을 지정 (일반적으로 더 권장).

# 3. 테이블 종류

STANDARD TABLE (기본)

가장 일반적, 쓰기 성능 우수.

SORTED TABLE

자동 정렬, 키 필수.

HASHED TABLE

키 기반 랜덤 접근, 읽기 성능 최고.

# 4. with header line

DATA: fieldcatalog TYPE slis_t_fieldcat_alv WITH HEADER LINE.

한 줄 선언으로 “행”과 “테이블”을 동시에 생성.

최근에는 권장되지 않고, 보통 wa + itab 두 줄로 나누어 선언.

# 5. 주요 조작

APPEND wa TO itab. → 행을 테이블에 추가.

CLEAR wa. → 행 초기화.

REFRESH itab. → 테이블 전체 초기화.

# 6. 디버깅

브레이크포인트: 실행 구문에서만 가능.

세션 브레이크포인트: 즉시/임시(일반적으로 사용).

익스터널 브레이크포인트: 사용자 ID 기준, 2시간 유지.

실행 제어:

Single Step → 한 줄씩 실행.

Execute → 범위 실행.

Return → 현재 함수/폼 빠져나가기.

Continue → 다음 브레이크포인트까지 실행.

# 7. 기타

시스템 변수 예시:

SY-REPID → 현재 프로그램 이름.

FIELDCATALOG: ALV 출력용 구조, [] 표기 시 테이블 의미.

초기값: 타입 I(정수)는 기본 0으로 초기화됨.

### 브레이크 포인트 한번에 없애는 방법
<img width="642" height="313" alt="Image" src="https://github.com/user-attachments/assets/8dfa52e5-47b1-4c71-9c58-a7dbc7fe0feb" />

<img width="829" height="400" alt="Image" src="https://github.com/user-attachments/assets/b62addf3-a2a0-4e54-8b65-0342046b8a3d" />

왼쪽 상단에 한줄 체크 다 누르고 그 위쪽에 빨간색 마이너스 버튼 클릭 후 오른쪽 아래 초록색 체크표시 클릭

에러있는데 activate 강제로 절대 하면 안됨.

이러면 브레이크 포인트도 안걸림

# 디버그 과제
data_retrieval 이후 테이블이 생성됨

<img width="1539" height="748" alt="Image" src="https://github.com/user-attachments/assets/2052eb31-7fc5-4a5a-a504-7dfe544e24e5" />

디버그를 걸고 필드값을 더블클릭 한 후 값을 보면 스텝을 진행할때마다 값이 하나씩 채워짐.

<img width="1535" height="658" alt="Image" src="https://github.com/user-attachments/assets/d0437a2f-2041-41a6-ab78-c8c1b2319d60" />

클리어를 넘어가면 지정된 값들이 사라지는걸 볼 수 있음. 클리어는 걸어주는게 좋음. 값이 중복으로  들어가거나 겹칠 우려가 있다.

<img width="1522" height="644" alt="Image" src="https://github.com/user-attachments/assets/fcae88f2-58c1-4c98-b499-078be802d41f" />

# 선택 과제

<img width="546" height="737" alt="Image" src="https://github.com/user-attachments/assets/1ef7467e-becd-4627-ae86-d7e42c9ff02f" />

```
*&---------------------------------------------------------------------*
*& Report Z2WEEK_ALV02
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
REPORT Z2WEEK_ALV02.


TABLES:     sflight.

TYPE-POOLS: slis.                                 "ALV Declarations

*Data Declaration
*----------------
TYPES: BEGIN OF t_sflight,
       carrid   TYPE sflight-carrid,
       connid   TYPE sflight-connid,
       fldate   TYPE sflight-fldate,
       price    TYPE sflight-price,
       currency TYPE sflight-currency,
       seatsmax TYPE sflight-seatsmax,
       END OF t_sflight.

DATA: it_sflight TYPE STANDARD TABLE OF t_sflight INITIAL SIZE 0,
      wa_sflight TYPE t_sflight.

*ALV data declarations
DATA: fieldcatalog TYPE slis_t_fieldcat_alv WITH HEADER LINE,
      gd_tab_group TYPE slis_t_sp_group_alv,
      gd_layout    TYPE slis_layout_alv,
      gd_repid     LIKE sy-repid.


DATA : t TYPE slis_t_sp_group_alv .
************************************************************************
*Start-of-selection.
START-OF-SELECTION.

  PERFORM data_retrieval.
  PERFORM build_fieldcatalog.
  PERFORM build_layout.
  PERFORM display_alv_report.


*&---------------------------------------------------------------------*
*&      Form  BUILD_FIELDCATALOG
*&---------------------------------------------------------------------*
*       Build Fieldcatalog for ALV Report
*----------------------------------------------------------------------*
FORM build_fieldcatalog.

  fieldcatalog-fieldname   = 'carrid'.
  fieldcatalog-seltext_m   = 'Airline Code'.
  fieldcatalog-col_pos     = 0.
  fieldcatalog-outputlen   = 10.
  APPEND fieldcatalog TO fieldcatalog.
  CLEAR  fieldcatalog.

  fieldcatalog-fieldname   = 'connid'.
  fieldcatalog-seltext_m   = 'Flight Connection Number'.
  fieldcatalog-col_pos     = 1.
  APPEND fieldcatalog TO fieldcatalog.
  CLEAR  fieldcatalog.

  fieldcatalog-fieldname   = 'fldate'.
  fieldcatalog-seltext_m   = 'Flight date'.
  fieldcatalog-col_pos     = 2.
  APPEND fieldcatalog TO fieldcatalog.
  CLEAR  fieldcatalog.

  fieldcatalog-fieldname   = 'price'.
  fieldcatalog-seltext_m   = 'Airfare'.
  fieldcatalog-col_pos     = 3.
  APPEND fieldcatalog TO fieldcatalog.
  CLEAR  fieldcatalog.

  fieldcatalog-fieldname   = 'currency'.
  fieldcatalog-seltext_m   = 'Local currency of airline'.
  fieldcatalog-col_pos     = 4.
  APPEND fieldcatalog TO fieldcatalog.
  CLEAR  fieldcatalog.

  fieldcatalog-fieldname   = 'seatmax'.
  fieldcatalog-seltext_m   = 'Maximum capacity in economy class'.
  fieldcatalog-col_pos     = 5.
  APPEND fieldcatalog TO fieldcatalog.
  CLEAR  fieldcatalog.

ENDFORM.                    " BUILD_FIELDCATALOG


*&---------------------------------------------------------------------*
*&      Form  BUILD_LAYOUT
*&---------------------------------------------------------------------*
*       Build layout for ALV grid report
*----------------------------------------------------------------------*
FORM build_layout.

  gd_layout-no_input          = 'X'.
  gd_layout-colwidth_optimize = 'X'.
  gd_layout-zebra = 'X'.
*  gd_layout-info_fieldname =      'LINE_COLOR'.
*  gd_layout-def_status = 'A'.

ENDFORM.                    " BUILD_LAYOUT


*&---------------------------------------------------------------------*
*&      Form  DISPLAY_ALV_REPORT
*&---------------------------------------------------------------------*
*       Display report using ALV grid
*----------------------------------------------------------------------*
FORM display_alv_report.
  gd_repid = sy-repid.
  CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
    EXPORTING
      i_callback_program = gd_repid
      is_layout          = gd_layout
      it_fieldcat        = fieldcatalog[]
      i_save             = 'X'
    TABLES
      t_outtab           = it_sflight
    EXCEPTIONS
      program_error      = 1
      OTHERS             = 2.
  IF sy-subrc <> 0.
* MESSAGE ID SY-MSGID TYPE SY-MSGTY NUMBER SY-MSGNO
*         WITH SY-MSGV1 SY-MSGV2 SY-MSGV3 SY-MSGV4.
  ENDIF.


ENDFORM.                    " DISPLAY_ALV_REPORT


*&---------------------------------------------------------------------*
*&      Form  DATA_RETRIEVAL
*&---------------------------------------------------------------------*
*       Retrieve data form EKPO table and populate itab it_ekko
*----------------------------------------------------------------------*
FORM data_retrieval.
  DATA: ld_color(1) TYPE c.

  SELECT carrid connid fldate price currency seatsmax
*   UP TO 10 ROWS
    FROM sflight "항공사 테이블
    INTO TABLE it_sflight.

ENDFORM.                    " DATA_RETRIEVAL
```